name: Check File Changes

on:
  pull_request:
    branches:
      - main
      - staging
      - release

jobs:
  tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Check for changes in file
        run: |
          git fetch
          DIFFRENCE_DIRECTORY="$(git diff --name-status origin/main:src/main/resources/db/migration src/main/resources/db/migration)"
          echo "$DIFFRENCE_DIRECTORY"
          FILES_IN_BRANCH="$(git ls-tree -r origin/main --name-only src/main/resources/db/migration)"
          echo "$FILES_IN_BRANCH"
          echo "FILES IN LOCAL"
          FILES_IN_DIR="$(ls src/main/resources/db/migration)"
          echo "$FILES_IN_DIR"
